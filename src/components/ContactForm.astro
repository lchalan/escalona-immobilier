---
/**
 * ContactForm Component
 * Formulaire de contact réutilisable
 */

interface Props {
  title?: string;
  submitText?: string;
  showPropertyField?: boolean;
  propertyRef?: string;
}

const { 
  title = 'Nous contacter',
  submitText = 'Envoyer',
  showPropertyField = false,
  propertyRef 
} = Astro.props;
---

<div class="contact-form">
  {title && <h3>{title}</h3>}
  
  <form action="/api/contact" method="POST">
    <div class="form-group">
      <label class="form-label" for="nom">Nom *</label>
      <input type="text" id="nom" name="nom" class="form-input" required />
    </div>
    
    <div class="form-group">
      <label class="form-label" for="email">Email *</label>
      <input type="email" id="email" name="email" class="form-input" required />
    </div>
    
    <div class="form-group">
      <label class="form-label" for="telephone">Téléphone</label>
      <input type="tel" id="telephone" name="telephone" class="form-input" />
    </div>
    
    {showPropertyField && (
      <div class="form-group">
        <label class="form-label" for="bien">Référence du bien</label>
        <input 
          type="text" 
          id="bien" 
          name="bien" 
          class="form-input" 
          value={propertyRef || ''}
          readonly={!!propertyRef}
        />
      </div>
    )}
    
    <div class="form-group">
      <label class="form-label" for="message">Message *</label>
      <textarea 
        id="message" 
        name="message" 
        class="form-textarea" 
        rows="5" 
        required
      ></textarea>
    </div>
    
    <div class="form-group">
      <label class="form-checkbox">
        <input type="checkbox" name="rgpd" required />
        <span class="text-small">
          J'accepte que mes données soient traitées pour répondre à ma demande. 
          <a href="/politique-confidentialite/">En savoir plus</a>
        </span>
      </label>
    </div>
    
    <button type="submit" class="btn btn--primary">{submitText}</button>
  </form>
</div>

<style>
  .form-checkbox {
    display: flex;
    gap: var(--space-sm);
    align-items: flex-start;
    cursor: pointer;
  }
  
  .form-checkbox input {
    margin-top: 0.25rem;
  }
</style>
